<html lang="en" ng-app="tileEditor">
<head>
	<title></title>
	<link rel="stylesheet" href="css/bootstrap.css" />
	<link rel="stylesheet" href="css/styles.css" />
</head>
<body>

	<div id="editor" ng-controller="EditorCtrl">
		<div id="menubar">
			<button ng-click="stopDrag()" style="margin:20px">Stop Drag</button>
			<button ng-click="addImage()" style="margin:20px">Add Image</button>
			<button ng-click="saveMap()" style="margin:20px">Save Map</button>
			<button ng-click="loadMap()" style="margin:20px">Load Map</button>
			<button ng-click="read()" style="margin:20px">Read</button>
			<button ng-click="stat()"> Stat</button>
			<button ng-click="tilesets()"> Tilesets</button>
		</div>
		<div id="left">
			<tabs id="editPanes">
				<pane heading="World">
					<div id="editWorld" ng-controller="EditingCtrl">
						<div ng-repeat="row in World.query()" class="tileRow" ng-style="rowStyle">
							<div ng-repeat="tile in row" class="tile">
								<img ng-src="{{tile.img}}">
								<img ng-src="{{tile.highlight}}" class="highlight">
								<div class="trans"
									ng-mousedown="mouseDown($parent.$index, $index)" 
									ng-mouseup="mouseUp($parent.$index, $index)" 
									ng-mouseenter="mouseEnter($parent.$index, $index)"
									ng-mouseleave="mouseLeave($parent.$index, $index)">
								</div>
							</div>	
						</div>
					</div>
				</pane>

				<pane heading="Tiles">
					<div ng-controller="UploadCtrl">
						<form>
							<input type="text" ng-model="fileName">
							<input type="file" id="myinput">
							<button type="submit" ng-click="uploadFile()" ng-file-select="">Upload</button>
						</form>
					</div>
				</pane>

				<pane heading="Tilesets">
					<div ng-controller="tilesetsCtrl">
						<div ng-repeat="tileset in tilesets" ng-click="changeTileset($index)" class="tileset">
							<img ng-src="{{tileset.img}}" style="width: 100px; height: auto">
							<hr />
							<h4>{{tileset.name}}</h4> <button ng-click="editTileset($index)">Edit</button>
						</div>
					</div>
				</pane>
			</tabs>
		</div>
		<div id="right">
			<div id="minimap" ng-controller="minimapCtrl">
				<div ng-repeat="row in World.query()" class="tileRow" ng-style="rowStyle">
					<div ng-repeat="tile in row" class="tile minimapTile">
						
						<img ng-src="{{tile.img}}">
						<img ng-src="{{tile.highlight}}" class="highlight">
						<div class="trans" 
							ng-mousedown="tileDown($parent.$index, $index)" 
							ng-mouseup="tileUp($parent.$index, $index)" 
							ng-mouseenter="tileEnter($parent.$index, $index)" 
							ng-mouseleave="tileLeave($parent.$index, $index)">
						</div>
					</div>
				</div>
				<div id="border" ng-style="borderStyle" ng-mouseup="tileUp()"></div>
			</div>
			<tabs>
				<pane heading="Tiles">
					<div id="selectTiles" ng-controller="SelectionCtrl" ng-mouseleave="moduleLeave()" ng-style="{width: getWidth()}">
						<div ng-repeat="row in SelectedTiles.tileset.tiles" class="tileRow" ng-style="{width: row.length*33}">
							<div ng-repeat="tile in row" class="tile">
								
								<img ng-src="{{tile.img}}" class="tileImage">
								<img ng-src="{{tile.highlight}}" class="highlight">
								<div class="trans" 
									ng-mousedown="tileDown($parent.$index, $index)" 
									ng-mouseup="tileUp($parent.$index, $index)" 
									ng-mouseenter="tileEnter($parent.$index, $index)" 
									ng-mouseleave="tileLeave($parent.$index, $index)">
								</div>
							</div>
						</div>
					</div>
				</pane>
			</tabs>
		</div>
	</div>

	<script src="lib/jquery.js"></script>
	<script src="lib/angular.js"></script>
	<script src="lib/angular-resource.min.js"></script>
	<script src="lib/canvas-to-blob.min.js"></script>
	<script src="lib/angular-file-upload.js"></script>
	<script src="lib/ui-bootstrap-tpls-0.3.0.min.js"></script>
	<script src="js/tiles/tiles.js"></script>
	<script src="js/world/world.js"></script>
	<script src="js/editing/editing.js"></script>
	<script src="js/selection/selection.js"></script>
	<script src="js/minimap/minimap.js"></script>
	<script src="js/upload/upload.js"></script>
	<script src="js/app.js"></script>
</body>
</html>